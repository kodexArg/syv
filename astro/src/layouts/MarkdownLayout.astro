---
export interface Props {
  titulo: string;
  descripcion?: string;
  collection: string;
  headings: any[];
  tags?: string[];
  fecha?: Date;
  carpeta: string;
}

const { titulo, descripcion, collection, headings, tags, fecha, carpeta } = Astro.props;
const tocHeadings = headings.filter(h => h.depth >= 2 && h.depth <= 3);
---

<article class="document-layout">
  <header class="document-header">
    <span class="collection-badge">{collection}</span>
    <h1>{titulo}</h1>
    {descripcion && <p class="description">{descripcion}</p>}
  </header>

  <div class="document-grid">
    <main class="document-content prose-content">
      <slot />
    </main>
    
    {tocHeadings.length > 0 && (
      <aside class="document-toc">
        <nav>
          <h3>En esta p√°gina</h3>
          <ul>
            {tocHeadings.map(heading => (
              <li>
                <a href={`#${heading.slug}`} class={heading.depth === 2 ? 'toc-h2' : 'toc-h3'}>
                  {heading.text}
                </a>
              </li>
            ))}
          </ul>
        </nav>
      </aside>
    )}
  </div>
</article> 